"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79792],{3353:(e,r,t)=>{t.d(r,{J:()=>v});var n=t(487011),a=t(532850),o=t(360662),l=t(50042),i=t(655515),d=t(119349),s=t(981278),u=t(455729),{shutterstockBaseUrl:c}=(0,i.K)(),v=e=>{var r,{couponCode:t,displayInlineCancellationFlow:i,additionalQueryParams:v={}}=e,p=(0,s.useRouter)(),m=(0,o.Q)(),h=!!(null==m||null==(r=m.current)?void 0:r.isPeacock);return(0,u.useCallback)(e=>{var{orderId:r}=e,o=(0,d.BF)({language:p.locale,baseUrl:c,pathname:(0,l.DG)({queryParams:(0,n._)({orderId:r},v,(null==p?void 0:p.query)||{},h&&{isCreativeAiOrder:"true"},t?{[a.m]:t,[a.AW]:t}:{},i&&{display:"inlineCancellationFlow"})})});window.location=o},[t,h,p,i,v])}},56979:(e,r,t)=>{t.d(r,{$:()=>d});var n=t(487519),a=t(183014),o=t(531950),l=t(884378),i=e=>{var{queryParams:r}=e;return(0,n.uy)({queryParams:r}).formattedUrl},d=function(){var{queryParams:e={},shouldFetch:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.P)(r?i({queryParams:e}):null,e=>o.Bn.get(e).then(e=>(0,l.A)(e.data)))}},66707:(e,r,t)=>{t.r(r),t.d(r,{BuyAndDownloadButton:()=>w});var n=t(406029),a=t(464839),o=t(215075),l=t(926114),i=t(811401),d=t(513372),s=t(727326),u=t(532850),c=t(882431),v=t(911449),p=t(461266),m=t(568880),h=t(455729),f=(0,t(807703).n9)()(()=>({buttonProgress:{position:"absolute"}})),b=e=>{var{t:r}=e;return{buyAndDownload:r("activation-drawers:pricing_checkout_download_label")}},y=e=>{var{product:r,selectedProductLicenseType:t}=e,{license:n}=t,{name:a}=r;return n&&a?"".concat(s.lnH," - ").concat(n,"License - ").concat(a):s.lnH},w=e=>{var{classes:r=p.vB,asset:t,assetSize:s,couponCode:w="",isDisabled:_=!1,product:N,productType:C=u.PZ,selectedShadowsOption:g,selectedProductLicenseType:P=p.vB,setCreateOrderStatus:x=p.lQ,vatNumber:A,labelText:k,className:D}=e,[I,B]=(0,h.useState)(!1),{classes:L,cx:O}=f(),{t:E,ready:U}=(0,m.Bd)(l.sVY),F=b({t:E}),{license:j}=P,{createOrderHandler:T,isCreateOrderInProgress:S}=(0,v.s)({orderFlow:c.Y.IMAGE_DOWNLOAD_PANEL,asset:t,assetSize:s,couponCode:w,productOverride:N,productType:C,vatNumber:A,setCreateOrderStatus:x,license:j,selectedShadowsOption:g,isLicenseDrawer:!0}),M=S||!U||_||!I,z=y({product:N,selectedProductLicenseType:P});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.l,{asset:t,isTermsChecked:I,setTermsCheckbox:B}),(0,n.jsxs)(d.$n,{className:O(L.buyAndDownloadButton,r.buyAndDownloadButton,D),"aria-label":k||F.buyAndDownload,variant:"contained",color:"secondary",onClick:T,fullWidth:!0,disabled:M,labelTrack:z,children:[S&&(0,n.jsx)(a.A,{color:"inherit",size:24,className:O(L.buttonProgress,r.buyAndDownloadButton)}),k||(U?F.buyAndDownload:(0,n.jsx)(o.A,{variant:"text",width:"100%"}))]})]})}},262139:(e,r,t)=>{t.r(r),t.d(r,{BuyAndDownloadButton:()=>N,getAnalyticsLabel:()=>_});var n=t(406029),a=t(464839),o=t(215075),l=t(926114),i=t(291753),d=t(517596),s=t(811401),u=t(513372),c=t(727326),v=t(532850),p=t(882431),m=t(911449),h=t(461266),f=t(568880),b=t(455729),y=(0,t(807703).n9)()(e=>{var{tokens:{spacing:r}}=e;return{buttonProgress:{position:"absolute"},downloadButton:{marginTop:r.base}}}),w=e=>{var{t:r}=e;return{buyAndDownload:r("activation-drawers:pricing_checkout_download_label")}},_=e=>{var{product:r,selectedProductLicenseType:t,hasActiveMembershipSub:n}=e,{license:a}=t,{name:o}=r;if(a&&o){var l="".concat(c.lnH," - ").concat(a,"License - ").concat(o);return"".concat(n?"".concat(l," - ").concat(i.jQ):l)}return c.lnH},N=e=>{var{asset:r,assetSize:t,couponCode:N="",isDisabled:C=!1,product:g,productType:P=v.PZ,selectedProductLicenseType:x=h.vB,setCreateOrderStatus:A=h.lQ,selectedShadowsOption:k,vatNumber:D,eligibilityData:I=h.vB,labelText:B,membershipProps:L=h.vB}=e,{isEligibleForEnhanceLicensingSingleAsset:O}=(0,d.r)(),{classes:E}=y(),[U,F]=(0,b.useState)(!1),{t:j,ready:T}=(0,f.Bd)(l.sVY),S=w({t:j}),{license:M}=x,{hasActiveMembershipSub:z}=L,{createOrderHandler:R,isCreateOrderInProgress:Y}=(0,m.s)({orderFlow:p.Y.LICENSING_DRAWER,asset:r,assetSize:t,couponCode:N,productOverride:g,productType:P,vatNumber:D,setCreateOrderStatus:A,selectedShadowsOption:k,license:M,isLicenseDrawer:!0,eligibilityData:I}),G=Y||!T||C||!U,H=O?c.Bni:_({product:g,selectedProductLicenseType:x,hasActiveMembershipSub:z}),W=z?i.DB:B;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.l,{asset:r,isTermsChecked:U,setTermsCheckbox:F}),(0,n.jsxs)(u.$n,{"aria-label":W||S.buyAndDownload,"data-automation":"".concat(W||c.lnH,"_button"),variant:"contained",color:"secondary",onClick:R,fullWidth:!0,disabled:G,labelTrack:H,className:E.downloadButton,children:[Y&&(0,n.jsx)(a.A,{color:"inherit",size:24,className:E.buttonProgress}),W||(T?S.buyAndDownload:(0,n.jsx)(o.A,{variant:"text",width:"100%"}))]})]})}},291753:(e,r,t)=>{t.d(r,{DB:()=>u,TE:()=>p,a_:()=>c,ay:()=>i,cy:()=>s,e7:()=>d,jQ:()=>v,lY:()=>a,rY:()=>l,vB:()=>o});var n=t(315888),a="LICENSING",o="LOADING",l="PURCHASING",i="none",d={[n.zWM]:2,[n.InX]:5,[n.gtC]:25,[n.W_1]:2,[n.HCH]:5,[n.xh8]:25},s="Download for free",u="Download",c="Tier100",v="NonTier100",p="eligibilityErrorNoEligibility"},346504:(e,r,t)=>{t.d(r,{JA:()=>f,Up:()=>p,Z0:()=>m,bV:()=>w,dV:()=>h,eb:()=>b,kI:()=>v,mk:()=>y,wb:()=>u});var n=t(9549),a=t(485650),o=t(831664),l=t(581298),i=t(302168),d=t(198795),s=t(455729),u=e=>{var{prices:r}=e,{currencyData:{currency:t=n.OS}}=(0,l.Y)();return(0,i.zn)({prices:r,localeCurrency:t})},c=e=>{var{basePrice:r,pricePerSeat:t,seatCount:n}=e;return r?r+t*n:NaN},v=e=>{var r,t,n,{product:a}=e,{prices:o={},pricesPerSeat:l={},seatCount:i,downloadCredits:s,commitmentLength:v,id:p}=a,m=u({prices:o}),h=null!=(r=o[null==m?void 0:m.toLowerCase()])?r:NaN,f=null!=(t=l[null==m?void 0:m.toLowerCase()])?t:NaN,b=h,y=s&&1===v?12*s:s||1;return"17438"!==p||s||(y=2),f&&i&&(b=c({basePrice:h,pricePerSeat:f,seatCount:i})),null!=(n=(0,d.f)(b/y,m))?n:void 0},p=e=>{var r,{product:t,promotion:n=0}=e,{prices:a={},pricesPerSeat:o={},seatCount:l}=t||{},i=u({prices:a}),s=null!=(r=a[null==i?void 0:i.toLowerCase()])?r:NaN,v=o[null==i?void 0:i.toLowerCase()],p=s;return n>0&&(p=Math.round(s*(1-n))),v&&l&&(p=c({basePrice:s,pricePerSeat:v,seatCount:l})),(0,d.f)(p,i)},m=e=>{var r,t,n,a,l,i,{activeTab:s,productGroup:c,productToCompare:v=o.XN}=e,{prices:p}={prices:{}},m=u({prices:p}),{products:h={}}=c,f=h[s],b=12*(null!=(l=null==f||null==(t=f[v])||null==(r=t.prices)?void 0:r[null==m?void 0:m.toLowerCase()])?l:NaN)-(null!=(i=null==f||null==(a=f[o.Ww])||null==(n=a.prices)?void 0:n[null==m?void 0:m.toLowerCase()])?i:NaN),y=(0,d.f)(b,m);return b>0?y:null},h=e=>{var{price:r,product:t}=e,{prices:n}=t,a=u({prices:n});return(0,d.f)(r,a)},f=e=>{var r,{product:t,downloadsPerMonth:n,discountPercentage:o=0,selectedProductLicenseType:l=""}=e,c=u({prices:null!=(r=null==t?void 0:t.prices)?r:{}}),{pricePerPaymentInterval:v,pricePerMonth:p,pricePerAsset:m,pricePerAssetDiscounted:h,priceDiscounted:f}=(0,s.useMemo)(()=>{var e,r,d,s,u,v,p=(0,i.f8)({product:null!=t?t:{}}),m=(0,i.Eu)({product:t}),h=l===a.ZI1,f=2*!["KRW","JPY"].includes(c),b=(0,i.Fj)({product:null!=t?t:{}}),y=b&&!m?12:1,w=null!=(r=null==t||null==(e=t.prices)?void 0:e[c.toLowerCase()])?r:NaN,_=w-w/100*o,N=b?(w/12).toFixed(f):w,C=h?((null==t?void 0:t.allotmentCredits)||0)/20:null!=(d=null==t?void 0:t.allotmentCredits)?d:NaN,g=(w/y/(null!=(s=p?C:null==t?void 0:t.allotmentCredits)?s:NaN)).toFixed(f),P=o?(_/y/(null!=(v=null!=(u=null==t?void 0:t.allotmentCredits)?u:n)?v:NaN)).toFixed(f):g;return{priceDiscounted:_,pricePerMonth:N,pricePerAsset:g,pricePerAssetDiscounted:P,pricePerPaymentInterval:w}},[c,n,t,o,l]);return{pricePerAsset:m,formattedPricePerPaymentInterval:(0,d.f)(v,c),formattedPricePerMonth:(0,d.f)(p,c),formattedPricePerAsset:(0,d.f)(m,c),formattedPricePerAssetDiscounted:(0,d.f)(h,c),formattedPriceDiscounted:(0,d.f)(f,c)}},b=e=>{var r,t,n,{product:a,singleClipProduct:o}=e,{prices:l,allotmentCredits:i}=a,s=u({prices:l}),c=null!=(t=l[s.toLowerCase()])?t:NaN,v=null!=(n=null==o||null==(r=o.prices)?void 0:r[s.toLowerCase()])?n:NaN,p=(c/(null!=i?i:NaN)).toFixed(2),m=((v-parseFloat(p))*(null!=i?i:NaN)).toFixed(0);return{formattedPackagePrice:(0,d.f)(c,s),formattedPricePerAsset:(0,d.f)(p,s),formattedSaveAmount:(0,d.f)(m,s)}},y=e=>{var r,{product:t,itemCount:n=1}=e,a=u({prices:(null==t?void 0:t.prices)||{}}),o=null!=(r=null==t?void 0:t.prices[null==a?void 0:a.toLowerCase()])?r:NaN,l=p({product:t}),i=o/n;return{originalPrice:o,formattedPrice:l,pricePerItem:(0,d.f)(i.toFixed(2),a),pricePerItemRaw:i}},w=e=>{var r,{prices:t={},commitmentRemaining:n=0}=e,a=u({prices:t}),o=null!=(r=t[null==a?void 0:a.toLowerCase()])?r:NaN;return{monthlyPrice:(0,d.f)(o,a),totalRemainingPrice:(0,d.f)(o*n,a)}}},426774:(e,r,t)=>{t.d(r,{l:()=>a});var n=t(651642).Buffer,a=e=>{var r=JSON.stringify(e);return n.from(r).toString("base64")}},517596:(e,r,t)=>{t.d(r,{Y:()=>a,r:()=>o});var n=t(455729),a=(0,n.createContext)({isEligibleForEnhanceLicensingSingleAsset:!1}),o=()=>(0,n.useContext)(a)},808059:(e,r,t)=>{t.d(r,{kN:()=>c,h6:()=>m,Cw:()=>p});var n=t(406029),a=t(487011),o=t(293096),l=t(467889),i=e=>(0,l.y)()(r=>(0,o._)((0,a._)({},e),{actions:{setStates:e=>r(r=>(0,a._)({},r,e)),setState:(e,t)=>r(r=>(0,o._)((0,a._)({},r),{[e]:t}))}})),d=t(455729),s=t(565317),u=(0,d.createContext)(null),c=e=>{var{children:r,initialState:t}=e,[a]=(0,d.useState)(()=>i(t));return(0,n.jsx)(u.Provider,{value:a,children:r})},v=e=>{var r=(0,d.useContext)(u);if(!r)throw Error("useConversionPanelStore must be used within CounterStoreProvider");return(0,s.P)(r,e)},p=e=>v(r=>r[e]),m=()=>v(e=>e.actions)},811401:(e,r,t)=>{t.d(r,{l:()=>v});var n=t(406029),a=t(571024),o=t.n(a),l=o()(()=>t.e(44103).then(t.bind(t,639846)).then(e=>({default:e.EditorialTerms})),{loadableGenerated:{webpack:()=>[639846]},ssr:!1}),i=t(215075),d=o()(()=>t.e(56895).then(t.bind(t,725831)).then(e=>({default:e.GeneratedAssetTerms})),{loadableGenerated:{webpack:()=>[725831]},ssr:!1,loading:()=>(0,n.jsx)(i.A,{height:"126px",variant:"rectangular",sx:{marginTop:"8px"}})}),s=t(498917),u=t(580030),c=t(455729),v=e=>{var{asset:r,isTermsChecked:t=!1,setTermsCheckbox:a}=e,o=(0,u.OK)(r),i=(0,s.iu)(r);return((0,c.useEffect)(()=>{o||i||a(!0)},[o,i,a]),o)?(0,n.jsx)(l,{asset:r,isTermsChecked:t,onCheckboxChange:a}):i?(0,n.jsx)(d,{isTermsChecked:t,onCheckboxChange:a}):null}},911449:(e,r,t)=>{t.d(r,{s:()=>Y});var n=t(951220),a=t(487011),o=t(293096),l=t(315888),i=t(648973),d=t(754725),s=t(969185),u=t(705992),c=t(353420),v=t(532850),p=t(581298),m=t(664029),h=t(935271),f=t(302168),b=t(559044),y=t(903074),w=t(30721),_=e=>{var{asset:r,productName:t,isBogoPromotionActive:n=!1}=e,a=(0,y.J)(),o=(0,w.i9)(),i=(0,b.sY)(r);return((null==a?void 0:a.isFBA)||!o)&&!i&&n&&t===l.uyi},N=t(426774),C=t(529862),g=t(262593),P=t(56979),x=t(3353),A=t(346504),k=t(120638),D=t(293733),I=t(377981),B=t(819254),L=t(631549),O=t(586694),E=t(323982),U=t(524335),F=t(962316),{NODE_CONFIG_ENV:j}=t(929143).env,T=()=>{var e=(0,F.NF)()?"production":"qa";switch(j||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}},S=t(811407),M=t(946887),z=t(981278),R=t(455729),Y=e=>{var r,{products:t,asset:y,assetSize:F,couponCode:j,productId:Y,productType:G=v.PZ,productOverride:H,seatCount:W,setCreateOrderStatus:Z,setIsInvalidCoupon:J,vatNumber:V,license:$,isLicenseDrawer:q=!1,preset:K,eligibilityData:Q={},existingUserRedirectPath:X,selectedShadowsOption:ee,shouldForceAsset:er=!1,subscriptionIdentifier:et,cancellationReason:en,additionalCheckoutQueryParams:ea,orderFlow:eo,checkoutAction:el}=e,{region:ei}=(0,p.Y)(),{isIndiaRegion:ed}=(0,D.Z)(),{data:es}=(0,w.rA)(),{data:eu}=(0,L.J)(),ec=(0,w.i9)(),ev=(0,B.o)(),[ep,em]=(0,R.useState)(!1),[,eh]=(0,E.p4)(y)||[],{eligibilityCurrency:ef,debitableIdentifier:eb}=Q,ey=(0,O.Jz)()||(0,S.vb)(),{checkGate:ew}=(0,U.U)(),e_=(0,R.useMemo)(()=>null!=H?H:(0,a._)({},(0,f.eO)(t,Y),W?{seatCount:W}:{}),[H,Y,t,W]),eN=null==e_?void 0:e_.id,{asPath:eC}=(0,z.useRouter)(),eg=(0,A.wb)({prices:null!=(r=null==e_?void 0:e_.prices)?r:{}}),{data:eP}=(0,P.$)({shouldFetch:!!ec}),ex=_({asset:y,productName:e_.name}),eA=j||e_.couponCode,ek=(0,k.Rt)({cookies:void 0,signUpView:void 0,queryParams:(0,a._)({landing_page:(0,g.$)({couponCode:eA,productId:eN,vatNumber:V,seatCount:null==e_?void 0:e_.seatCount,doNotRedirect:!0,asset:ed||er?y:void 0,existingUserRedirect:X||eh,license:$,additionalGenerateCheckoutParams:ea,promotions:null==e_?void 0:e_.promotions})},K&&{preset:K})}),eD=(0,R.useCallback)(()=>{if(window){var e,r;M.A.set(d.uc,eC),null==(r=window.NREUM)||null==(e=r.addPageAction)||e.call(r,"UP3-1623 assign loggedOutHandler authRedirectPath to href",(0,o._)((0,a._)({},window.location||{}),{asPath:eC,authRedirectPath:ek})),window.location.href=ek}},[eC,ek]),eI=(0,h.Z5)({paymentProfiles:eP}),eB=(0,R.useCallback)(e=>{var r,t,n={createTime:null==es?void 0:es.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:null==eu?void 0:eu.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:null==es?void 0:es.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:null==es?void 0:es.id,username:null==es?void 0:es.username,isLicenseDrawer:q};null==(t=window.NREUM)||null==(r=t.noticeError)||r.call(t,e,n)},[eu,es,q]),eL=(0,x.J)({additionalQueryParams:(0,a._)({},ea,el&&{checkoutAction:el}),couponCode:eA}),eO=(0,I.h)(),[eE,eU]=(0,R.useState)({status:"",error:void 0}),eF=(0,R.useCallback)((0,n._)(function*(){try{if(null==Z||Z({status:"",error:void 0}),eU({status:"",error:void 0}),em(!0),eP){var e,r,t=y?{assets:[{asset:y,selectedAssetSize:(0,m.aZ)({assetType:(0,b.f0)(y),assetSize:F})}]}:{},n=[];n.push((0,o._)((0,a._)({},t),{product:e_,productType:G}));var d=e_.name===l.rVp,p=ew(s.gx),f=d&&p?(0,N.l)(c.ju[l.rVp]):void 0;null!=en&&null!=et&&n.push({product:{id:T(),type:"products"},cancellationReason:en,subscriptionIdentifier:et});var{headers:w}=(0,C.H)({trackingId:ey,headers:{[u.DF]:ev}})||{},{data:_}=yield(0,h.fS)({country:ei,currency:ef||eg,paymentProfileId:null==eI?void 0:eI.paymentId,orderItems:n,selectedShadowsOption:ee,vatNumber:V,couponCode:eA,promotions:null!=(r=null==e_?void 0:e_.promotions)?r:f,license:$,debitableIdentifier:eb,configs:{headers:w},isEligibleForUnlimitedBogoPromotion:ex,isFootageSelect:!!y&&(0,b.ex)(y)});eO({actionName:"convert - order creation success",customAttributes:{productName:e_.name,productType:G,country:ei,currency:ef||eg,assetType:(0,b.f0)(y),assetSize:F,license:$,isLicenseDrawer:q,orderFlow:eo,couponCode:eA,orderId:_.id}}),null==Z||Z({status:i.qO,error:void 0}),eU({status:i.qO,error:void 0}),em(!1),eL({orderId:_.id})}em(!1)}catch(r){null==Z||Z({status:i.Nz,error:r}),eU({status:i.Nz,error:r}),em(!1),(null==r||null==(e=r.detail)?void 0:e.toLowerCase())===v.s_&&(null==J||J(!0)),eB(r)}}),[Z,eP,y,F,e_,G,ew,en,et,ey,ev,ei,ef,eg,null==eI?void 0:eI.paymentId,ee,V,eA,$,eb,ex,eO,q,eo,eL,eB,J]);return{createOrderHandler:ec?eF:eD,isCreateOrderInProgress:ep,product:e_,orderStatus:eE,createOrderHandlerLoading:ec&&!eP}}},935271:(e,r,t)=>{t.d(r,{NM:()=>B,fS:()=>D,Z5:()=>x});var n=t(951220),a=t(487011),o=t(487519),l=t(914689),i=t(315888),d=t(392684),s=t(532598),u=t(338436),c=t(813631),v=t(532850),p=t(293096),m=t(92424),h=t(398426),f=function(e){var r,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n]=e,{media:o}=n,l=(0,m._)(n,["media"]),d=(null==o?void 0:o[0])||{};switch(d.type){case c.W1:r="".concat(i.lcL,"-var-0004");break;case c.FY:r=h.eJ;break;case c.M9:r=h.Xs;break;case c.G_:r=i.t8m[d.size],t&&(r=i.fV_);break;default:return e}return[(0,p._)((0,a._)({},l),{media:[]}),{product:{id:r,type:v.Uy},media:[d]}]},b=t(353420),y=t(426774),w=()=>(0,y.l)(b.ju[i.uyi]),_=t(559044),N=t(531950),C=t(884378),g="production"!==t(929143).env.NODE_CONFIG_ENV,P=e=>{var r,t,n,a,o,i;switch(e.paymentMethod){case l.L2:return{paymentId:e.id,expirationMonth:null==e||null==(r=e.creditCard)?void 0:r.expMonth,expirationYear:null==e||null==(t=e.creditCard)?void 0:t.expYear,maskedNumber:null==e||null==(n=e.creditCard)?void 0:n.maskedNumber,cardType:null==e||null==(a=e.creditCard)?void 0:a.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case l.RD:return{paymentId:e.id,bic:null==e||null==(o=e.sepaDirectDebit)?void 0:o.bic,maskedIBAN:null==e||null==(i=e.sepaDirectDebit)?void 0:i.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case l.ON:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},x=e=>{var{paymentProfiles:r=[]}=e;return Array.isArray(r)&&0!==r.length?P(r.find(e=>!0===e.isDefault)||r[0]):null},A=e=>{var{orderItems:r=[],license:t,country:n="",debitableIdentifier:o,selectedShadowsOption:p}=e;return r.map(e=>{var{product:{id:r,eligibleForRebilling:m,seatCount:h,name:f=""}={},productType:b,assets:y,paymentMethod:w,subscriptionIdentifier:N,cancellationReason:C,cancellationReasonName:g}=e,P=N&&C?(0,a._)({subscription_identifier:N,cancellation_reason:C},g&&{cancellation_reason_name:g}):{},x=[];return h&&(P.seat_count=h),(null==w?void 0:w.type)!==l.gU&&(P.subscription_id=null==w?void 0:w.id),(null==y?void 0:y.length)&&(x=y.map(e=>{var{asset:r,selectedAssetSize:n}=e,o=(0,_.Ub)(r),l=(0,_.OJ)(r);return(0,a._)({type:o,id:r.id,license:t},l&&{format:u.mx,size:u.mx,headline:r.title},(null==n?void 0:n.size)&&{size:n.size},(null==n?void 0:n.format)&&{format:n.format},o===c.W1&&r.imageType===c.m$&&(0,a._)({angle:r.angle||d.R,content_provider:c._Y},(null==n?void 0:n.format)!==s.yC&&{include_shadows:"on"===(p||"on").toLocaleLowerCase()}))})),P.auto_renewal=m&&b===v.PZ&&!i.F7K.includes(n)&&!i.KGB.includes(f),P.debitable_identifier=o,(0,a._)({product:{id:r,type:b||v.Uy}},x&&{media:x},Object.keys(P).length>0&&{meta:P})})},k=e=>{var{currency:r,country:t,paymentProfileId:n,items:o,couponCode:l,vatNumber:i,promotions:d}=e;return{data:{type:"orders",attributes:(0,a._)({currency:r,items:o,country:t,payment_profile_id:n,coupons:l?[{type:"coupon",name:"coupon",coupon_code:l}]:[],client_data:{},vat_override:i||void 0},d&&{promotions:d})}}},D=function(){var e=(0,n._)(function*(e){var{country:r,couponCode:t,currency:n,orderItems:l=[],selectedShadowsOption:i,paymentProfileId:d,vatNumber:s,configs:u={},license:c=v.sU,debitableIdentifier:p,promotions:m,isEligibleForUnlimitedBogoPromotion:h=!1,isFootageSelect:b=!1}=e,y=A({orderItems:l,license:c,country:r,debitableIdentifier:p,selectedShadowsOption:i});h&&(y=f(y,b));var _=(0,o._u)().formattedUrl,P=k({country:r,couponCode:t,promotions:h?w():m,currency:n,items:y,paymentProfileId:d,vatNumber:s});return N.Bn.post(_,P,(0,a._)({},u,g&&{timeout:3e4})).then(e=>({headers:e.headers,data:(0,C.A)(e.data)}))});return function(r){return e.apply(this,arguments)}}(),I=e=>{var{orderItems:r=[],country:t="",debitableIdentifier:n}=e;return r.map(e=>{var{product:{id:r,license:o,name:d="",productType:s,eligibleForRebilling:c,seatCount:p}={},assets:m,paymentMethod:h}=e,f=(0,a._)({},p&&{seat_count:p},(null==h?void 0:h.type)!==l.gU&&{subscription_id:null==h?void 0:h.id}),b=[];return(null==m?void 0:m.length)&&(b=m.map(e=>{var{asset:r,selectedAssetSize:t}=e,n=(0,_.OJ)(r),l=(0,_._$)(r);return(0,a._)({type:l,id:r.id,license:o},n&&{format:u.mx,size:u.mx,headline:r.title},(null==t?void 0:t.size)&&{size:t.size},(null==t?void 0:t.format)&&{format:t.format})})),f.auto_renewal=c&&s===v.PZ&&!i.F7K.includes(t)&&!i.KGB.includes(d),f.debitable_identifier=n,(0,a._)({product:{id:r,type:s||v.Uy}},b&&{media:b},Object.keys(f).length>0&&{meta:f})})},B=function(){var e=(0,n._)(function*(e){var{country:r,currency:t,orderItems:n,paymentProfileId:l,vatNumber:i,configs:d={},debitableIdentifier:s,promotions:u}=e,c=I({orderItems:n,country:r,debitableIdentifier:s}),v=(0,o._u)().formattedUrl,p=k({country:r,currency:t,items:c,paymentProfileId:l,vatNumber:i,promotions:u}),m=yield N.Bn.post(v,p,(0,a._)({},d,g&&{timeout:3e4}));return{headers:m.headers,data:(0,C.A)(m.data)}});return function(r){return e.apply(this,arguments)}}()},948695:(e,r,t)=>{t.r(r),t.d(r,{BuyAndDownloadButton:()=>m});var n=t(487011),a=t(406029),o=t(464839),l=t(513372),i=t(485650),d=t(532850),s=t(808059),u=t(882431),c=t(911449),v=t(30721),p=t(52492),m=e=>{var r,{asset:t,assetSizeStateId:m,assetType:h,buttonConfig:f={showIcon:!0,variant:"contained",color:"secondary"},clickAnalyticsLabel:b,clickAnalyticsLabelMap:y,label:w,orderFlow:_=u.Y.UNLIMITED_CONVERSION_PANEL,productStateId:N,productOverride:C,products:g,setStateOnLoggedOutClick:P,termsCheckboxStateId:x,shouldUseSignupModal:A=!0}=e,k=(0,v.i9)(),{setStates:D}=(0,s.h6)(),I=(0,s.Cw)(null!=N?N:""),B=(0,s.Cw)(m),L=null==(r=(0,s.Cw)(null!=x?x:""))||r,{isCreateOrderInProgress:O,createOrderHandler:E,createOrderHandlerLoading:U}=(0,c.s)((0,n._)({orderFlow:_,productId:I,productType:d.PZ,asset:t,products:g,shouldForceAsset:!0,assetSize:B,license:i.or1[h]},C&&{productOverride:C})),F=O||U||!L;return(0,a.jsxs)(l.$n,{"aria-label":w,disabled:F,fullWidth:!0,onClick:()=>{!k&&A?D(P):E()},labelTrack:(null==y?void 0:y[I])||b,variant:f.variant,color:f.color,style:{marginBottom:"8px"},children:[O&&(0,a.jsx)(o.A,{color:"inherit",size:24,style:{position:"absolute"}}),f.showIcon&&(0,a.jsx)(p.Download,{style:{padding:"2px",marginRight:"4px"}}),w]})}}}]);
//# sourceMappingURL=BuyAndDownloadButton.6a217d6d7ec9aefb.js.map